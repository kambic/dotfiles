
# Example windowrules that are useful

windowrule {
    # Ignore maximize requests from all apps. You'll probably like this.
    name = suppress-maximize-events
    match:class = .*

    suppress_event = maximize
}

windowrule {
    # Fix some dragging issues with XWayland
    name = fix-xwayland-drags
    match:class = ^$
    match:title = ^$
    match:xwayland = true
    match:float = true
    match:fullscreen = false
    match:pin = false

    no_focus = true
}

# Hyprland-run windowrule
windowrule {
    name = move-hyprland-run

    match:class = hyprland-run

    move = 20 monitor_h-120
    float = yes
}

# Ref https://wiki.hypr.land/Configuring/Workspace-Rules/
# "Smart gaps" / "No gaps when only"
# uncomment all if you wish to use that.
# workspace = w[tv1], gapsout:0, gapsin:0
# workspace = f[1], gapsout:0, gapsin:0
# windowrule {
#     name = no-gaps-wtv1
#     match:float = false
#     match:workspace = w[tv1]
#
#     border_size = 0
#     rounding = 0
# }
#
# windowrule {
#     name = no-gaps-f1
#     match:float = false
#     match:workspace = f[1]
#
#     border_size = 0
#     rounding = 0
# }

$floating = kitty-menu|com.github.hluk.copyq|blueman-manager|nm-connection-editor|hyprpwcenter|octopi|org.keepassxc.KeePassXC|tlpui|btrfs-assistant|org.gnome.FileRoller|signal|xdg-desktop-portal-gtk|GParted

windowrule {
    name  = apply-floating
    match:class = $floating
    float = true
}
# Title-based for generic dialogs (GTK/Qt file choosers, etc.)
windowrule {
    name = float-by-title
    match:title = ^(Open File|Save File|Open|Save As|File Transfer|Progress|Confirm|Preferences|Settings|About|Properties)$
    float = on
    center = on
    animation = popin
}
# Firefox/Chrome dev tools, page info, etc.
windowrule {
    name = browser-tools
    match:class = ^(firefox|google-chrome|chromium)$
    match:title = ^(DevTools|Inspector|Picture-in-Picture|Library|Page Info)$
    float = on
    pin = on  # Optional: keep on top
}

# Steam child windows (settings, friends, etc.)
windowrule {
    name = steam-dialogs
    match:class = ^(steam)$
    # match:title = ^(?!Steam$)  # Anything except exact "Steam" main window
    float = on
}

windowrule {
  name = move-kitty
  match:class = kitty

  # float = true

  animation = popin
}

windowrule = match:tag games, fullscreen 0, no_blur on
windowrule = match:class ^(jetbrains-*), no_initial_focus on

# --- Auto-generated layer rules ---
layerrule = match:namespace hyprlauncher, blur on
layerrule = match:namespace waybar, blur on

# Expanded floating dialogs/tools (add to your $floating variable)
$floating = ^(kitty-menu|com.github.hluk.copyq|blueman-manager|nm-connection-editor|hyprpwcenter|octopi|org.keepassxc.KeePassXC|tlpui|btrfs-assistant|org.gnome.FileRoller|signal|xdg-desktop-portal-gtk|GParted|pavucontrol|org.pulseaudio.pavucontrol|virt-manager|pinentry|pinentry-gtk|pinentry-qt|yad|zenity|qt5ct|kvantummanager|bitwarden|org.keepassxc.KeePassXC.MainWindow)$

# Audio/Volume controls (pavucontrol, etc.)
windowrule {
    name = float-audio
    match:class = ^(pavucontrol|org.pulseaudio.pavucontrol)$
    float = on
    center = on
    size = 60% 50%
    animation = popin
}

# Bluetooth manager
windowrule {
    name = float-bluetooth
    match:class = ^(blueman-manager)$
    float = on
    center = on
    animation = popin
}

# Password prompts (bitwarden, pinentry, sudo dialogs)
windowrule {
    name = float-password
    match:class = ^(bitwarden|pinentry.*)$
    match:title = ^(Enter passphrase|Unlock|Password)$
    float = on
    center = on
    stay_focused = on  # Keeps focus (fixes losing input)
    animation = popin
}

# Generic dialogs by title (catches many "Open/Save/Confirm" popups)
windowrule {
    name = float-generic-dialogs
    match:title = ^(Open File|Save File|Open|Save As|Confirm|Preferences|Settings|Properties|Progress|About)$
    float = on
    center = on
    size = 70% 60%
    animation = popin
}

# Music players (Spotify, etc. â€“ often better floating or workspace-specific)
windowrule {
    name = spotify-workspace
    match:class = ^(Spotify)$
    workspace = 5 silent  # Change to your music workspace; silent = no focus steal
    float = off           # Keep tiled if you prefer
}

# Idle inhibit for media (prevents screen blanking during video/fullscreen)
windowrule {
    name = idle-inhibit-media
    match:class = ^(mpv|vlc|firefox|chromium|google-chrome)$
    match:fullscreen = true
    idle_inhibit = always  # Or 'focus' for when focused
}

# No blur/shadow on certain apps (performance or aesthetics)
windowrule {
    name = no-effects-media
    match:class = ^(mpv|steam_app_\d+|gamescope)$
    # blur = off
    # shadow = off
}

# Virtual machines / remote viewers
windowrule {
    name = vm-fullscreen
    match:class = ^(virt-viewer|virt-manager|looking-glass-client)$
    fullscreen = on
    workspace = 9 silent
}
